import { useLocation } from "react-router-dom";

export type DemoLanguage = "es" | "en" | "it";

const demoTranslations: Record<DemoLanguage, Record<string, string>> = {
  es: {
    "form.title": "Crea tu evento de prueba",
    "form.subtitle": "Crea un evento gratuito con hasta 10 fotos para probar Revelao",
    "form.step1.eventName": "Nombre del evento *",
    "form.step1.font": "Tipografía",
    "form.step1.description": "Descripción del evento",
    "form.step1.descriptionPlaceholder": "Escribe el texto que quieres que aparezca en la pantalla",
    "form.step1.background": "Fotografía de fondo (opcional)",
    "form.step1.backgroundHelp": "Imagen que aparecerá como fondo en la cabecera de la galería.",
    "form.step1.customLogo": "Logo personalizado (opcional)",
    "form.step1.customLogoHelp": "Máximo 240px ancho × 100px alto. Se muestra como icono en las pantallas.",
    "form.step1.country": "¿Dónde es el evento?",
    "form.step1.language": "Idioma",
    "form.step1.duration": "Duración del evento",
    "form.step1.startDate": "Fecha de inicio",
    "form.step1.startTime": "Hora de inicio",
    "form.step1.endDate": "Fecha fin",
    "form.step1.endTime": "Hora de fin",
    "form.step1.reveal": "Revelado",
    "form.step1.revealDate": "Fecha del revelado",
    "form.step1.revealTime": "Hora del revelado",
    "form.step1.spainTime": "En España:",
    "form.step2.title": "Información de contacto",
    "form.step2.subtitle": "Necesitamos tus datos para poder contactarte si tienes algún problema con tu evento",
    "form.step2.email": "Email *",
    "form.step2.password": "Contraseña *",
    "form.step2.passwordConfirm": "Repetir contraseña *",
    "form.step2.phone": "Teléfono (opcional)",
    "form.step2.emailPlaceholder": "tu@email.com",
    "form.step2.passwordPlaceholder": "Mínimo 8 caracteres",
    "form.step2.passwordConfirmPlaceholder": "Repite la contraseña",
    "form.step2.phonePlaceholder": "+34 600 000 000",
    "form.actions.back": "Atrás",
    "form.actions.next": "Siguiente",
    "form.actions.uploading": "Subiendo imagen...",
    "form.actions.creating": "Creando evento...",
    "form.actions.create": "Crear evento de prueba",
    "form.errors.emailRequired": "El email es obligatorio",
    "form.errors.emailInvalid": "Por favor, introduce un email válido",
    "form.errors.passwordMin": "La contraseña debe tener al menos 8 caracteres",
    "form.errors.passwordMismatch": "Las contraseñas no coinciden",
    "form.errors.imageUpload": "No se pudo subir la imagen",
    "form.errors.eventCreate": "No se pudo crear el evento",
    "form.errors.demoExistsTitle": "Ya existe un evento de prueba",
    "form.errors.demoExistsDesc": "Inicia sesión para ver tu evento demo.",
    "form.errors.userExistsTitle": "El email ya está registrado",
    "form.errors.userExistsDesc": "Inicia sesión para ver tus eventos.",
    "summary.createdTitle": "¡Evento creado con éxito!",
    "summary.demoLabel": "Evento de prueba • Máximo {count} fotos",
    "summary.qrAlt": "QR del evento",
    "summary.qrDownload": "Descargar QR",
    "summary.qrHint": "Los invitados pueden escanear este código QR para acceder al evento",
    "summary.eventUrl": "URL del evento",
    "summary.copyTitle": "Copiado",
    "summary.copyDesc": "Texto copiado al portapapeles",
    "summary.copyErrorTitle": "Error",
    "summary.copyErrorDesc": "No se pudo copiar al portapapeles",
    "summary.uploadStart": "Inicio de subida",
    "summary.uploadEnd": "Fin de subida",
    "summary.revealDate": "Fecha de revelado",
    "summary.adminTitle": "Cómo gestionar tu evento",
    "summary.adminStepIntro": "Para ver las fotos y administrar tu evento, sigue estos pasos:",
    "summary.adminStep1": "Entra en",
    "summary.adminStep2": "Introduce tu contraseña de administrador:",
    "summary.adminStep3": "Podrás ver todas las fotos incluso antes del revelado",
    "summary.demoNoticeTitle": "Este es un evento de prueba",
    "summary.demoNoticeText": "Para contratar un evento real, visita",
    "summary.demoNoticeTextEnd": "y elige el plan que mejor se ajuste.",
    "summary.createAnother": "Crear otro evento",
    "summary.goToEvent": "Ir al evento",
    "summary.help": "¿Algún problema?",
    "summary.contact": "¡Contáctanos!",
  },
  en: {
    "form.title": "Create your demo event",
    "form.subtitle": "Create a free event with up to 10 photos to try Revelao",
    "form.step1.eventName": "Event name *",
    "form.step1.font": "Font",
    "form.step1.description": "Event description",
    "form.step1.descriptionPlaceholder": "Write the text you want to show on the screen",
    "form.step1.background": "Background photo (optional)",
    "form.step1.backgroundHelp": "Image that appears as the gallery header background.",
    "form.step1.customLogo": "Custom logo (optional)",
    "form.step1.customLogoHelp": "Max 240px width × 100px height. Shown as an icon on screens.",
    "form.step1.country": "Where is the event?",
    "form.step1.language": "Language",
    "form.step1.duration": "Event duration",
    "form.step1.startDate": "Start date",
    "form.step1.startTime": "Start time",
    "form.step1.endDate": "End date",
    "form.step1.endTime": "End time",
    "form.step1.reveal": "Reveal",
    "form.step1.revealDate": "Reveal date",
    "form.step1.revealTime": "Reveal time",
    "form.step1.spainTime": "In Spain:",
    "form.step2.title": "Contact information",
    "form.step2.subtitle": "We need your details in case you have any issues with your event",
    "form.step2.email": "Email *",
    "form.step2.password": "Password *",
    "form.step2.passwordConfirm": "Repeat password *",
    "form.step2.phone": "Phone (optional)",
    "form.step2.emailPlaceholder": "you@email.com",
    "form.step2.passwordPlaceholder": "Minimum 8 characters",
    "form.step2.passwordConfirmPlaceholder": "Repeat the password",
    "form.step2.phonePlaceholder": "+1 555 000 000",
    "form.actions.back": "Back",
    "form.actions.next": "Next",
    "form.actions.uploading": "Uploading image...",
    "form.actions.creating": "Creating event...",
    "form.actions.create": "Create demo event",
    "form.errors.emailRequired": "Email is required",
    "form.errors.emailInvalid": "Please enter a valid email",
    "form.errors.passwordMin": "Password must be at least 8 characters",
    "form.errors.passwordMismatch": "Passwords do not match",
    "form.errors.imageUpload": "Could not upload the image",
    "form.errors.eventCreate": "Could not create the event",
    "form.errors.demoExistsTitle": "A demo event already exists",
    "form.errors.demoExistsDesc": "Log in to view your demo event.",
    "form.errors.userExistsTitle": "Email is already registered",
    "form.errors.userExistsDesc": "Log in to view your events.",
    "summary.createdTitle": "Event created successfully!",
    "summary.demoLabel": "Demo event • Max {count} photos",
    "summary.qrAlt": "Event QR",
    "summary.qrDownload": "Download QR",
    "summary.qrHint": "Guests can scan this QR code to access the event",
    "summary.eventUrl": "Event URL",
    "summary.copyTitle": "Copied",
    "summary.copyDesc": "Text copied to clipboard",
    "summary.copyErrorTitle": "Error",
    "summary.copyErrorDesc": "Could not copy to clipboard",
    "summary.uploadStart": "Upload start",
    "summary.uploadEnd": "Upload end",
    "summary.revealDate": "Reveal date",
    "summary.adminTitle": "How to manage your event",
    "summary.adminStepIntro": "To see the photos and manage your event, follow these steps:",
    "summary.adminStep1": "Go to",
    "summary.adminStep2": "Enter your admin password:",
    "summary.adminStep3": "You can view all photos even before the reveal",
    "summary.demoNoticeTitle": "This is a demo event",
    "summary.demoNoticeText": "To purchase a real event, visit",
    "summary.demoNoticeTextEnd": "and choose the plan that fits.",
    "summary.createAnother": "Create another event",
    "summary.goToEvent": "Go to event",
    "summary.help": "Any issues?",
    "summary.contact": "Contact us!",
  },
  it: {
    "form.title": "Crea il tuo evento demo",
    "form.subtitle": "Crea un evento gratuito con fino a 10 foto per provare Revelao",
    "form.step1.eventName": "Nome evento *",
    "form.step1.font": "Carattere",
    "form.step1.description": "Descrizione dell’evento",
    "form.step1.descriptionPlaceholder": "Scrivi il testo da mostrare sullo schermo",
    "form.step1.background": "Foto di sfondo (opzionale)",
    "form.step1.backgroundHelp": "Immagine che appare come sfondo dell’intestazione della galleria.",
    "form.step1.customLogo": "Logo personalizzato (opzionale)",
    "form.step1.customLogoHelp": "Massimo 240px larghezza × 100px altezza. Mostrato come icona.",
    "form.step1.country": "Dove si svolge l’evento?",
    "form.step1.language": "Lingua",
    "form.step1.duration": "Durata dell’evento",
    "form.step1.startDate": "Data di inizio",
    "form.step1.startTime": "Ora di inizio",
    "form.step1.endDate": "Data di fine",
    "form.step1.endTime": "Ora di fine",
    "form.step1.reveal": "Rivelazione",
    "form.step1.revealDate": "Data di rivelazione",
    "form.step1.revealTime": "Ora di rivelazione",
    "form.step1.spainTime": "In Spagna:",
    "form.step2.title": "Informazioni di contatto",
    "form.step2.subtitle": "Abbiamo bisogno dei tuoi dati in caso di problemi con l’evento",
    "form.step2.email": "Email *",
    "form.step2.password": "Password *",
    "form.step2.passwordConfirm": "Ripeti password *",
    "form.step2.phone": "Telefono (opzionale)",
    "form.step2.emailPlaceholder": "tu@email.com",
    "form.step2.passwordPlaceholder": "Minimo 8 caratteri",
    "form.step2.passwordConfirmPlaceholder": "Ripeti la password",
    "form.step2.phonePlaceholder": "+39 333 000 000",
    "form.actions.back": "Indietro",
    "form.actions.next": "Avanti",
    "form.actions.uploading": "Caricamento immagine...",
    "form.actions.creating": "Creazione evento...",
    "form.actions.create": "Crea evento demo",
    "form.errors.emailRequired": "L’email è obbligatoria",
    "form.errors.emailInvalid": "Inserisci un’email valida",
    "form.errors.passwordMin": "La password deve avere almeno 8 caratteri",
    "form.errors.passwordMismatch": "Le password non coincidono",
    "form.errors.imageUpload": "Impossibile caricare l’immagine",
    "form.errors.eventCreate": "Impossibile creare l’evento",
    "form.errors.demoExistsTitle": "Esiste già un evento demo",
    "form.errors.demoExistsDesc": "Accedi per vedere il tuo evento demo.",
    "form.errors.userExistsTitle": "Email già registrata",
    "form.errors.userExistsDesc": "Accedi per vedere i tuoi eventi.",
    "summary.createdTitle": "Evento creato con successo!",
    "summary.demoLabel": "Evento demo • Massimo {count} foto",
    "summary.qrAlt": "QR evento",
    "summary.qrDownload": "Scarica QR",
    "summary.qrHint": "Gli invitati possono scansionare questo QR per accedere all’evento",
    "summary.eventUrl": "URL dell’evento",
    "summary.copyTitle": "Copiato",
    "summary.copyDesc": "Testo copiato negli appunti",
    "summary.copyErrorTitle": "Errore",
    "summary.copyErrorDesc": "Impossibile copiare negli appunti",
    "summary.uploadStart": "Inizio caricamento",
    "summary.uploadEnd": "Fine caricamento",
    "summary.revealDate": "Data di rivelazione",
    "summary.adminTitle": "Come gestire il tuo evento",
    "summary.adminStepIntro": "Per vedere le foto e gestire l’evento, segui questi passaggi:",
    "summary.adminStep1": "Vai su",
    "summary.adminStep2": "Inserisci la password amministratore:",
    "summary.adminStep3": "Potrai vedere tutte le foto anche prima della rivelazione",
    "summary.demoNoticeTitle": "Questo è un evento demo",
    "summary.demoNoticeText": "Per acquistare un evento reale, visita",
    "summary.demoNoticeTextEnd": "e scegli il piano più adatto.",
    "summary.createAnother": "Crea un altro evento",
    "summary.goToEvent": "Vai all’evento",
    "summary.help": "Hai un problema?",
    "summary.contact": "Contattaci!",
  },
};

const getLangFromPath = (pathname: string): DemoLanguage => {
  if (pathname.startsWith("/en")) return "en";
  if (pathname.startsWith("/it")) return "it";
  return "es";
};

export const getDemoPathPrefix = (lang: DemoLanguage) =>
  lang === "es" ? "" : `/${lang}`;

export const useDemoI18n = () => {
  const location = useLocation();
  const lang = getLangFromPath(location.pathname);
  const t = (key: string, vars?: Record<string, string | number>) => {
    const template = demoTranslations[lang][key] ?? key;
    if (!vars) return template;
    return Object.keys(vars).reduce(
      (acc, varKey) =>
        acc.replace(`{${varKey}}`, String(vars[varKey])),
      template,
    );
  };
  return { lang, t, pathPrefix: getDemoPathPrefix(lang) };
};
